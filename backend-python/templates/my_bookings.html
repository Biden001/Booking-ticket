{% extends "base.html" %}

{% block title %}VÃ© cá»§a tÃ´i - HUY CINEMA{% endblock %}

{% block content %}
<h1 class="page-title">ğŸŸï¸ VÃ© Ä‘Ã£ Ä‘áº·t</h1>

{% if bookings %}
<div class="booking-list">
    {% for booking in bookings %}
    <div class="booking-item">
        <img src="{{ booking.poster_url or url_for('static', filename='images/default.jpg') }}" 
             alt="{{ booking.title }}"
             onerror="this.style.display='none'">
        <div class="booking-details">
            <h3>{{ booking.title }}</h3>
            <p><strong>ğŸ­ Ráº¡p:</strong> {{ booking.theater }}</p>
            <p><strong>ğŸ“… NgÃ y:</strong> {{ booking.show_date }}</p>
            <p><strong>ğŸ• Giá»:</strong> {{ booking.show_time }}</p>
            <p><strong>ğŸ’º Gháº¿:</strong> {{ booking.seat_number }}</p>
            <p><strong>ğŸ’° GiÃ¡:</strong> {{ "{:,.0f}".format(booking.price or 0) }} VND</p>
            <p class="{% if booking.status == 'confirmed' %}status-confirmed{% elif booking.status == 'cancelled' %}status-cancelled{% elif booking.status == 'expired' %}status-expired{% else %}status-pending{% endif %}">
                <strong>Tráº¡ng thÃ¡i:</strong> 
                {% if booking.status == 'confirmed' %}âœ… ÄÃ£ xÃ¡c nháº­n
                {% elif booking.status == 'cancelled' %}âŒ ÄÃ£ há»§y
                {% elif booking.status == 'expired' %}âŒ› ÄÃ£ háº¿t háº¡n
                {% else %}â³ Äang xá»­ lÃ½{% endif %}
            </p>
            <p><strong>ğŸ• Äáº·t lÃºc:</strong> {{ booking.booking_time }}</p>
            
            {% if booking.status == 'confirmed' %}
            <form method="POST" action="{{ url_for('cancel_booking', booking_id=booking.id) }}" style="margin-top: 0.5rem;">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n há»§y vÃ© nÃ y?')">
                    âŒ Há»§y vÃ©
                </button>
            </form>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<p style="text-align: center;">Báº¡n chÆ°a Ä‘áº·t vÃ© nÃ o. <a href="{{ url_for('index') }}" style="color: var(--primary);">Äáº·t vÃ© ngay!</a></p>
{% endif %}
{% endblock %}
